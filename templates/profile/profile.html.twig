{% extends 'base.html.twig' %}

{% block title %}Profile{% endblock %}

{% block body %}
    <div class="row">
        <div class="col-md-5 col-lg-4">
            <div class="card mb-4">
                <div class="card-body text-center">
                    {% if avatar_path %}
                        <img
                            src="{{ asset('uploads/avatars/' ~ avatar_path) }}"
                            class="rounded-circle mb-3"
                            alt="Profile picture"
                            style="width: 120px; height: 120px; object-fit: cover;"
                        >
                    {% else %}
                        <div
                            class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center mb-3"
                            style="width: 120px; height: 120px; font-size: 48px;"
                        >
                            {{ app.user.displayName|first|upper }}
                        </div>
                    {% endif %}
                    <h2 class="h5 mb-1">{{ app.user.displayName }}</h2>
                    <p class="text-muted mb-0">{{ app.user.email }}</p>
                </div>
            </div>
        </div>

        <div class="col-md-7 col-lg-8">
            <div class="row g-4">
                <div class="col-12">
                    <div class="card h-100">
                        <div class="card-body">
                            <h2 class="h5 mb-3">Profile</h2>
                            {{ form_start(profileForm, { attr: { class: 'vstack gap-3' } }) }}
                                {{ form_row(profileForm.displayName) }}
                                {{ form_row(profileForm.profilePicture) }}
                                <button type="submit" class="btn btn-primary">Save profile</button>
                            {{ form_end(profileForm) }}
                        </div>
                    </div>
                </div>

                <div class="col-12">
                    <div class="card h-100">
                        <div class="card-body">
                            <h2 class="h5 mb-3">Change password</h2>
                            {{ form_start(passwordForm, { attr: { class: 'vstack gap-3' } }) }}
                                {{ form_row(passwordForm.currentPassword) }}
                                {{ form_row(passwordForm.newPassword.first) }}
                                {{ form_row(passwordForm.newPassword.second) }}
                                <button type="submit" class="btn btn-outline-primary">Update password</button>
                            {{ form_end(passwordForm) }}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

